function pw(){
    # pass directory
    local prefix="${PASSWORD_STORE_DIR:-$HOME/.password-store}"

    # pass timeout
    local timeout="${PASSWORD_STORE_CLIP_TIME:-45}"

    # password var
    pw="$@"

    # check if exact match given
    if [[ ! -e "${prefix}/${pw}.gpg" ]]
    then
        # search for pass using completion helper
        pass_results="$(find -L "$prefix" -type f -not -path '*.git*' -not -name '.gpg-id' | sed -e "s#${prefix}/##" -e 's#\.gpg$##' | sort | grep -i "$pw")"

        # show results when more than one
        if [[ "$(echo "${pass_results}" | wc -l)" -gt 1 ]]
        then
            echo "${pass_results}"
            return
        else
            # print only result
            pw="${pass_results}"

            echo "${0}: Only password matching search: '${pw}'"
            echo
        fi
    fi

    # show pass info
    pass show "$pw" | tail -n +2

    # copy password
    (pass -c "$pw" > /dev/null) &!

    # notify user
    notify-send "Copied password of '${pw}' to clipboard!"

    # notify about restoring clipboard
    (sleep $timeout; notify-send 'Password cleared, clipboard restored.') &!
}

# vim: ft=zsh
