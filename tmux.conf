# visual activity information
set -g visual-activity on

# use 256 colors
set -g default-terminal "screen-256color"

# colorize status bar
set -g status-bg colour46

# define left status bar
set -g status-left-length 30
set -g status-left ' [Session #S] '

# modify window list
set -g status-justify 'centre'
set -g window-status-format '#[bg=black] ###I -#W- #[default]'
set -g window-status-current-format '#[bg=black] ###I #F#W#F #[default]'
set -g window-status-separator ' ~ '

# default window title colors
set-window-option -g window-status-fg colour46
set-window-option -g window-status-bg default

# active window title colors
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-bg colour22

# define right status bar
set -g status-right-length 100
set -g status-right "#[fg=white]#[bg=black] #h #[fg=white]#[bg=colour4] #(ip -4 addr show | grep inet | grep 'scope global' | grep eth | awk '{print $2}' | sed -r 's/\/(.*)//') #[default]#[fg=white,bold]#[bg=red] #(cut -d ' ' -f 1-4 /proc/loadavg) #[default]#[fg=white,bold]#[bg=cyan] %Y-%m-%d %H:%M:%S #[default]"

# enable mouse mode
set -g mode-mouse on

# enable mouse pane resize
set -g mouse-resize-pane on

# enable mouse select pane
set -g mouse-select-pane on

# enable mouse select window
set -g mouse-select-window on

# history limit to 10000
set -g history-limit 10000

# set esc/alt disambiguation timeout to 50ms due to vim
set-option -sg escape-time 50

# numbering windowses by starting at 1
set-option -g base-index 1

# to make ctrl-arrow, etc. work
set-window-option -g xterm-keys on

# set vi keystyle
set-window-option -g mode-keys vi

##################
# KEYBINDINGS HERE

# reload tmux config
unbind r
bind r source-file ~/.tmux.conf \; display 'Reloaded tmux config.'

# maximize pane with C-b and +
unbind +
bind + new-window -d -n tmux-zoom 'clear && echo TMUX ZOOM && read' \; swap-pane -s tmux-zoom.0 \; select-window -t tmux-zoom

# maximize pane without C-b but with CTRL-SHIFT-X
unbind C-X
bind -n C-X new-window -d -n tmux-zoom 'clear && echo TMUX ZOOM && read' \; swap-pane -s tmux-zoom.0 \; select-window -t tmux-zoom
    
# minimize pane
unbind -
bind - last-window \; swap-pane -s tmux-zoom.0 \; kill-window -t tmux-zoom

# sync panes
unbind C-e
bind C-e setw synchronize-panes

# kill window
unbind k
bind k confirm kill-window

# kill pane
unbind C-w
bind C-w confirm kill-pane

# paste with C-v
unbind C-v
bind C-v paste-buffer

# go to copy mode with C-c
unbind C-c
bind C-c copy-mode

# navigate through panes with arrow keys
bind-key -n M-up select-pane -U
bind-key -n M-right select-pane -R
bind-key -n M-down select-pane -D
bind-key -n M-left select-pane -L

# navigate through panes with vim nav keys
bind-key -n M-k select-pane -U
bind-key -n M-l select-pane -R
bind-key -n M-j select-pane -D
bind-key -n M-h select-pane -L

# session layout with three panes above and two panes below
bind-key a split-window -p 50\; split-window -p 67 -t 0 -h\; split-window -p 50 -t 2 -h\; split-window -p 50 -t 1 -h\; kill-pane -t 1\; split-window -h -p 50 -t 3\;

# tmux buffer to xclipboards
bind-key p save-buffer ~/.tmux-buffer \; run-shell "xsel -i -b < ~/.tmux-buffer; xsel -i -p < ~/.tmux-buffer; rm ~/.tmux-buffer"
